\documentclass[tikz]{standalone}
\usetikzlibrary{calc,trees,positioning,arrows,chains,shapes.geometric,%
    decorations.pathreplacing,decorations.pathmorphing,shapes,%
    matrix,shapes.symbols,fit}

\pgfdeclarelayer{back}
\pgfsetlayers{back,main}

\begin{document}
\begin{tikzpicture}

\draw[dashed] (0,0) rectangle (6,10) node[anchor=north east,font=\Large] {OS};

%process 1
\draw[thick,draw=gray!70] (.49,6.49) grid[xstep=.25cm,ystep=.5cm] (2,9.5);
\draw[thick,-latex] (1.25,6.5) -- (1.25,.5) node[anchor=west] {p1};
\draw[fill=gray!70,fill opacity=.6] (.49,6.49) rectangle (2,8);
\draw[fill=blue,fill opacity=.75] (.49,6.49) rectangle (1.5,8);

%thread 1
\draw[thick] (1.25,6.) -- (1.75,5.5) node[anchor=west,text=blue] {thread 1} -- (1.75,5.) -- (1.25,4.5);

\foreach \i in {1,...,4}{
  \draw[thick] (1.25,3.) -- (1.75+.25*\i,2.75) -- (1.75+.25*\i,2.) -- (1.25,1.75);
}

\node[anchor=west] at(2.75,2.75) {threads $1-4$};
  \end{tikzpicture}
\end{document}
